<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>GenAI Mini App</title>
    <link rel="stylesheet" href="/static/style.css">
  </head>
  <body>
    <div class="container">
      <h1>GenAI Mini App</h1>
      <textarea id="prompt" placeholder="Enter prompt..." rows="6"></textarea>
      <div class="controls">
        <label>Model: <input id="model" value="gpt-4o-mini" /></label>
        <label>Temp: <input id="temperature" type="number" step="0.1" min="0" max="1" value="0.7"/></label>
        <button id="gen">Generate</button>
      </div>
      <div id="output" class="output"></div>
    </div>
    <script>
      document.getElementById('gen').addEventListener('click', async () => {
        const prompt = document.getElementById('prompt').value;
        const model = document.getElementById('model').value;
        const temperature = document.getElementById('temperature').value;
        document.getElementById('output').innerText = 'Generating...';
        try {
          const res = await fetch('/generate', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({prompt, model, temperature})
          });
          const data = await res.json();
          if (res.ok) document.getElementById('output').innerText = data.result;
          else document.getElementById('output').innerText = 'Error: ' + (data.error || JSON.stringify(data));
        } catch (err) {
          document.getElementById('output').innerText = 'Fetch error: ' + err;
        }
      });
    </script>
  </body>
</html>
